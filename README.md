# 공용 와이파이 주변 위치 탐색

## 프로젝트 목표
프로젝트를 시작하며 구상했던것은 서버에서 api적 기능을 극대화를 목표로 삼았습니다.
서버에서는 기본형식 혹은 json 으로 통신하며 클라이언트에서 받아드린 api를 통해 css, jsp ,javascript를 이용하여 각각 강점을 살릴수 있도록 계획했습니다.
하지만 jsp, css, javascript에 대한 이해도가 낮아 만족스러운 결과를 얻지는 못했습니다. 

구현된 기능은 다음과 같습니다.
1. 서울시 공공와이파이 서비스에서 와이파이 정보들을 가져와 데이터베이스에 넣고 총 와이파이 갯수를 나타낸다.
2. 현재 내가 있는 위치를 위도와 경도로 나타낸다.
3. 지정된 위도와 경도에서 가장가까운 와이파이 20곳을 정렬하여 보여준다
4. 조회하는시점(조회가 성공하는 시점으로 하였다.) 에서 히스토리를 데이터 베이스에 저장한다.
5. 북마크 그룹을 만들고 순서를 정해준다. 이떄 순서의 최대값은 그룹의 갯수를 넘어가지 않도록 자동으로 최대값을 채워준다.
6. 만든 북마크 그룹을 순서가 꼬이지않게끔 수정과 삭제가 가능하다
7. 만든 북마크 그룹을 기준으로 북마크를 저장한다.
8. 북마크에 소속된 북마크 그룹이 삭제 되었을경우 소속된 북마크들은 모두 제거한다.

아직 구현하지 못한기능은
1. 북마크 그룹을 수정할때 그대로 입력했을경우 거절하지않고 그대로 수정하여 수정일자가 변함
2. 북마크 그룹의 순서를 음수로 입력한경우 문제가 생길수있음
3. LAT, LNT 값의 유효성 검사가 안되어있음
4. BigDecimal대신 float나 int로 계산하여 오차가 있을수 있음
5. 리펙토링

## 배운점(느낀점)

### 공용 api
이번 서울시 공공 와이파이 서비스를 이용하여 json형식의 데이터를 받아오고 정제하여 자신의 데이터 베이스에 넣어보는 경험을 하였습니다.
다만 서울시api(String) -> 편하게 하기위한 클래스 변환(Class) -> 데이터베이스에 넣기위한 변환(JDBC) 의작업을 거치다보니 작동시간이 긴거같다.
특히 한번에 받아오는양이 1000개라 끝어서 반복적으로 요청하는 문제도있었다. 이부분은 데이터베이스에 대한 기초공부와 함께 좀더 고민해봐야할 문제인것같다.

### jsp, javascript, css
컴파일을 하지않다보니 확실히 문제점을 찾는시간이 좀더 길었던것같다. 또한 원하는 모양을 만들기위해 여러가지 시도를 했던기억이 아직도 생생하다.
가장 헷갈렸던것은 네이밍 규칙이다. 지금까지 카멜표기법만썼었다가 BEM표기법을 사용하니 중간중간 혼용하는것이있었다.

### 데이터 베이스와 ERD
이번 프로젝트에서 데이터베이스를 설계해보고 ERD를 작성해보았다.이번에 join전략도 한번쓰게 되었는데 나름 공부가 된것같다.
이번에 역정규화도 생각해 보았는데 
![erd.jpg](..%2F..%2FDesktop%2Fzero%2Fproject1%2Ferd.jpg)
여기 BOOKMARK_TB 부분의 fk인 관리번호 부분이다. 실질적으로 북마크 부분에서 보여지는곳은 아이디, 등록일자, 와이파이정보의 와이파이명, 북마크 그룹의 북마크 이름이다.
지금까지 생각했던 가능성은
1) 북마크 이름과 와이파이명을 fk로 만든다.

북마크의 이름을 fk로 만든것은 괜찮은것 같다 만약 key값을 하게되면 완전한 북마크를 얻기위해서는
join이 두번일어나게 된다.

따라서 fk을 북마크 그룹 이름으로하여 북마크를 불러낼때 북마크 그룹을 불러내지 않아도된다.
하지만 와이파이 정보는 에서 와이파이명이 같은것이 존재한다. 즉 고유값이 아니라서 적절하지 않다고 생각한다.

2) 와이파이의 key값을 fk로 만든다.

이부분도 문제가 있다. 생각해보면 와이파이 정보는 공용 와이파이에서 얻어온다.

이때 key중간에 있던 와이파이 하나가 사라졌다고 가정해보자.
이떄 우리가 값을 불러온다면 와이파이 정보의 id값은 한칸씩 당겨져서 저장이 될것이고 유효성검사를 위해 와이파이 정보를 불러올떄마다
북마크또한 같이 점검을 해야할것이다.

기본 key값뿐만이 아니라 위치가 이동할수도있다. 따라서 외래키를 사용하기 위해
고유한 값을 찾아야 했다.

3) 와이파이의 관리번호를 fk로 만든다.

이부분이 생각할수 있는 최선인것 같다. 관리번호는 언제든지 받아도 데이터가 삭제는 될지언정 수정되지는 않을것이다.
삭제가 된다면 자연스럽게 처리가 되겠지만 우리도 모르게 수정이 된다면 항상 유효성 검사를 해야하기 때문이다.

4) 그렇다면 아쉬운대로 와이파이 이름을 fk가 아니더라도 따로 저장하자.

이부분도 고민해보았으나 역시 와이파이명이 수정된다는 가능성이 0이 아니라는 생각이든다.
관리번호는 관리하기위해 데이터베이스의 key값처럼 고유하게 주나 와이파이명은 와이파이가 이동하면서
충분히 바뀔수 있다는 생각이들었다. 

따라서 결국 유효성 검사를 계속 진행해야한다.



